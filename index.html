<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Fault check</title>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,700" rel="stylesheet">
  <link rel="stylesheet" href="src/css/app.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
<header class="main-header">
  <h1>WeWire</h1>
  <h3>Fault Checker System.</h3>
</header>
<article class="card" id="pwa">
  <div class="card__image">
    <img src="src/images/icon-512x512.png" alt="WeWire">
  </div>
  <div class="card__content">
    <p>PWAs are great, since you can build native-mobile-app-like experiences.</p>
    <p>Core features are:</p>
    <ul>
      <li>Installable on <strong>Homescreen</strong></li>
      <li><strong>Offline support</strong> with service workers</li>
      <li>Usage of various <strong>caching strategies</strong></li>
      <li>Web <strong>push notifications</strong></li>
      <li><strong>Background sync</strong></li>
      <li>Native device features like <strong>camera</strong></li>
      <li>Way more...</li>
    </ul>
  </div>
  <div class="card__details">
    <p>PWAs really are awesome. And you can turn any application into a PWA.</p>
    <p>Or simply start using some of the features that make up a complete PWA. That process is called "progressive enhancement" and what the "progressive" in "Progressive Web App" stands for.</p>
    <p>Don't hesitate, dive into PWAs!</p>
  </div>
</article>
  <script>
    const PUBLIC_VAPID_KEY = "BNBZYTse3GG6kodGXolZi1BsjESZV0dP4TmtcJXCSrs2bD7OvM1CX9j6R-GpjP76qY7WZ5UU5ksXd_m74s_i3rA";
function urlBase64ToUint8Array(base64String) {
  const padding = "=".repeat((4 - (base64String.length % 4)) % 4);
  const base64 = (base64String + padding).replace(/-/g, "+").replace(/_/g, "/");

  const rawData = window.atob(base64);
  const outputArray = new Uint8Array(rawData.length);

  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray;
}
    
  if ('serviceWorker' in navigator) {
    const subscription = await register.pushManager.subscribe({
        userVisibleOnly: true,
        applicationServerKey: urlBase64ToUint8Array(PUBLIC_VAPID_KEY)
      });    
    
    navigator.serviceWorker.register('sw.js')
    .then(function() {
      console.log('SW registered...');
    });
  }
    </script>
  
</body>
</html>
